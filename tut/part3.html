<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8"/>
    <title>Let's Make a Canvas Library: Game Loop</title>

    <!--[if lt IE 9]>
    <script src="/js/html5shiv.js"></script>
    <![endif]-->

    <style>
        html, body { padding: 0; margin: 0; }
        .main {
            max-width: 800px;
            margin: 0 auto;
            background: #F7F7F7;
            padding: 10px 20px;
            border-style: dotted;
            border-width: 0 2px;
            border-color: #CCC;
        }
        #game {
            border: 1px solid #CCC;
            color: #ccc;
            background-color: #222;
            padding: 0;
            overflow: hidden;
            width: 320px; height: 240px;
        }
        #controls { width: 320px; }
        #fps { float: right; }
        #fps:after { content: " FPS"; }
        #status {
            display: inline-block;
            position: relative;
        }
        table td { min-width: 6em; vertical-align: top; }
        #status * { display: block; margin: 0 auto; }
    </style>
  </head>
  <body>
    <article class="main">
        <h1>Let's Make a Canvas Library, Part 3: Game Loops</h1>

        <p>This page demonstrates a super-basic implementation of a
           <a href="https://en.wikipedia.org/wiki/game_loop">game loop</a>.
           More details can be found in
           the <a href="http://www.buyog.com/code/post/lets-make-canvas-library-game-loop">related blog post</a>.</p>

        <p>This page references the RequireJS AMD loader, which pulls in part3.js,
           which in turn loads tangle/core.js, a
           <a href="http://en.wikipedia.org/wiki/Singleton_pattern">singleton</a> object
           that provides a few useful abstractions to make game loop management easier:
           <table cellspacing="5">
              <tr><td>main() loop</td>
                  <td>simply pass your main game loop function to main(),
                  and all the details of constructing and managing the game loop
                  (including play/pause functionality) are automatically handled.</td>
              </tr>
              <tr><td>FPS callback</td>
                  <td>pass a function as the second parameter to the main() function,
                  and it'll get called once per second with an updated frames-per-second
                  calculation.</td>
              </tr>
           </table>
        </p>

        <hr/>

        <section id="controls">
            <button id="onoff">Pause</button>
            <span id="fps">&mdash;</span>
        </section>
        <section id="gameContainer">
          <div id="game">
            <div id="status"></div>
          </div>
        </section>
    </article>

    <script src="../../require.js" data-main="part3"></script>
  </body>
</html>
